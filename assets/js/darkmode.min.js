/* materiality-typecho-theme Dark Mode
 * https://github.com/EAimTY/materiality-typecho-theme
 * Licensed under The GNU General Public License v3.0
 */function setCookie(b,c){(t=new Date).setTime(t.getTime()+6048e5),document.cookie=b+"="+c+"; expires="+t.toGMTString()+"; path=/;"}function getCookie(c){for(var a,g=c+"=",h=document.cookie.split(";"),d=0;d<h.length;d++)if(a=h[d].trim(),0==a.indexOf(g))return a.substring(g.length,a.length);return!1}function light(){setCookie("DARK_STATUS","0"),mdui.$("#dark_toggle_icon").html("&#xe901;"),mdui.$("#dark_toggle_btn").attr("mdui-tooltip","{content: '\u5207\u6362\u4E3A\u6697\u8272\u6A21\u5F0F'}"),mdui.$(".mdui-tooltip").each(function(){"\u5207\u6362\u4E3A\u4EAE\u8272\u6A21\u5F0F"==(v=mdui.$(this)).text()&&v.text("\u5207\u6362\u4E3A\u6697\u8272\u6A21\u5F0F")}),mdui.$("#color_chrome").attr("content","#"+getCookie("THEME_COLOR")),mdui.$("#color_safari").attr("content","#"+getCookie("THEME_COLOR")),mdui.$("body").removeClass("mdui-theme-layout-dark"),mdui.$("footer").addClass("mdui-color-theme"),mdui.$(".load-indicator").removeClass("load-indicator-dark")}function dark(){setCookie("DARK_STATUS","1"),mdui.$("#dark_toggle_icon").html("&#xe902;"),mdui.$("#dark_toggle_btn").attr("mdui-tooltip","{content: '\u5207\u6362\u4E3A\u4EAE\u8272\u6A21\u5F0F'}"),mdui.$(".mdui-tooltip").each(function(){"\u5207\u6362\u4E3A\u6697\u8272\u6A21\u5F0F"==(v=mdui.$(this)).text()&&v.text("\u5207\u6362\u4E3A\u4EAE\u8272\u6A21\u5F0F")}),mdui.$("#color_chrome").attr("content","#212121"),mdui.$("#color_safari").attr("content","#212121"),mdui.$("body").addClass("mdui-theme-layout-dark"),mdui.$("footer").removeClass("mdui-color-theme"),mdui.$(".load-indicator").addClass("load-indicator-dark")}function setExpire(a){a?7>(e=new Date).getHours()?setCookie("DARK_EXPIRE",new Date(e.getFullYear(),e.getMonth(),e.getDate(),7).getTime()):setCookie("DARK_EXPIRE",new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,7).getTime()):6<(e=new Date).getHours()&&20>e.getHours()?setCookie("DARK_EXPIRE",new Date(e.getFullYear(),e.getMonth(),e.getDate(),20).getTime()):setCookie("DARK_EXPIRE",(20<=e.getHours()?new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,7):new Date(e.getFullYear(),e.getMonth(),e.getDate(),7)).getTime())}function toggleDark(){"1"==getCookie("DARK_STATUS")?(light(),setExpire(0)):(dark(),setExpire(1))}function darkInit(){(e=new Date).getTime()>getCookie("DARK_EXPIRE")?(setCookie("DARK_EXPIRE","0"),1==getCookie("AUTO_DARK")?6<(e=new Date).getHours()&&20>e.getHours()?(light(),setExpire(0)):(dark(),setExpire(1)):(light(),setExpire(0))):1==getCookie("DARK_STATUS")?dark():light()}window.matchMedia("(prefers-color-scheme: dark)").addListener(b=>{1==getCookie("AUTO_DARK")&&(b.matches?dark():light(),setCookie("DARK_EXPIRE","0"))}),mdui.$(function(){darkInit(),1==getCookie("AUTO_DARK")&&window.matchMedia("prefers-color-scheme: dark").matches&&(dark(),setCookie("DARK_EXPIRE","0"))});
